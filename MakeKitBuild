#SUBDIRS="include src"
MODULES="core compiler"
PROJECT_NAME="sigyn"

defaults()
{
    MK_PREFIX=/opt/sigyn
}

option()
{
    mk_option \
        OPTION="buffer" \
        VAR="BUFSIZE" \
        PARAM="bufsize" \
        DEFAULT=1024 \
        HELP="Incomming string buffer size"
}

configure()
{
    mk_config_header "include/config.h"

    #mk_check_headers stdio.h stdlib.h string.h moocows.h
    mk_check_libraries mowgli
    mk_check_functions \
        HEADERDEPS="string.h" \
        strlcat strlcpy

    mk_msg "compile prefix: $MK_PREFIX"
    mk_msg "buffer size: $BUFSIZE"

    mk_export BUFSIZE
    mk_define BUFSIZE $BUFSIZE
}

make()
{
    mk_program \
        PROGRAM=sigyn \
        SOURCES="src/*.c" \
        INCLUDEDIRS="include" \
        LIBDEPS="mowgli"
}
